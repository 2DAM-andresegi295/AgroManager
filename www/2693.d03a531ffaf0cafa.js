"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2693],{1339:(I,M,t)=>{t.d(M,{u:()=>j});var p=t(467),u=t(3273),s=t(6710),R=t(4412),P=t(3026),e=t(9498),F=t(9602);let j=(()=>{var h;class v{constructor(l,c,_){this.auth=l,this.router=c,this.firestore=_,this.usuarioActual=new R.t(null),this.usuario$=this.usuarioActual.asObservable(),(0,s.hg)(this.auth,g=>{this.usuarioActual.next(g)})}login(l,c){var _=this;return(0,p.A)(function*(){try{return yield(0,s.x9)(_.auth,l,c)}catch(g){throw g}})()}registrar(l,c){var _=this;return(0,p.A)(function*(){try{return yield(0,s.eJ)(_.auth,l,c)}catch(g){throw g}})()}isAdmin(){var l=this;return(0,p.A)(function*(){const c=l.auth.currentUser;if(!c)return!1;const _=(0,P.rJ)(l.firestore,"administradores"),g=(0,u.P)(_,(0,u._M)("uid","==",c.uid));return(yield(0,u.GG)(g)).size>0})()}}return(h=v).\u0275fac=function(l){return new(l||h)(e.KVO(s.Nj),e.KVO(F.t),e.KVO(P._7))},h.\u0275prov=e.jDH({token:h,factory:h.\u0275fac,providedIn:"root"}),v})()},2693:(I,M,t)=>{t.r(M),t.d(M,{RegistroPageModule:()=>D});var p=t(8834),u=t(4341),s=t(7125),R=t(5528),P=t(467),e=t(9498),F=t(1339),j=t(9602);function h(r,a){1&r&&(e.j41(0,"ion-note",19),e.EFF(1," El nombre es obligatorio. "),e.k0s())}function v(r,a){1&r&&(e.j41(0,"ion-note",19),e.EFF(1," El correo debe ser v\xe1lido. "),e.k0s())}function C(r,a){1&r&&(e.j41(0,"ion-note",19),e.EFF(1," La contrase\xf1a debe tener al menos 6 caracteres. "),e.k0s())}function l(r,a){1&r&&(e.j41(0,"ion-note",19),e.EFF(1," Las contrase\xf1as no coinciden. "),e.k0s())}function c(r,a){if(1&r&&(e.j41(0,"ion-text",20)(1,"p"),e.EFF(2),e.k0s()()),2&r){const f=e.XpG();e.R7$(2),e.JRh(f.errorMessage)}}const g=[{path:"",component:(()=>{var r;class a{constructor(n,o,d){this.authService=n,this.router=o,this.loadingCtrl=d,this.usuario={nombre:"",email:"",password:"",confirmPassword:""},this.errorMessage=""}ngOnInit(){}registrar(){var n=this;return(0,P.A)(function*(){if(n.usuario.password!==n.usuario.confirmPassword)return void(n.errorMessage="Las contrase\xf1as no coinciden");const o=yield n.loadingCtrl.create({message:"Creando cuenta..."});yield o.present();try{yield n.authService.registrar(n.usuario.email,n.usuario.password),n.router.navigate(["/login"])}catch(d){n.errorMessage=n.traducirError(d.code)}finally{o.dismiss()}})()}traducirError(n){switch(n){case"auth/email-already-in-use":return"Este correo ya est\xe1 registrado";case"auth/invalid-email":return"Correo electr\xf3nico no v\xe1lido";case"auth/weak-password":return"La contrase\xf1a debe tener al menos 6 caracteres";default:return"Error al registrarse. Intenta nuevamente"}}get passwordMismatch(){return!!this.usuario.password&&!!this.usuario.confirmPassword&&this.usuario.password!==this.usuario.confirmPassword}}return(r=a).\u0275fac=function(n){return new(n||r)(e.rXU(F.u),e.rXU(j.t),e.rXU(s.Xi))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-registro"]],standalone:!1,decls:38,vars:18,consts:[["registroForm","ngForm"],["nombreField","ngModel"],["emailField","ngModel"],["passwordField","ngModel"],["confirmPasswordField","ngModel"],[1,"registro-content"],[1,"registro-container"],[1,"registro-card"],["novalidate","",3,"ngSubmit"],["position","floating"],["name","nombre","required","",3,"ngModelChange","ngModel"],["slot","error","color","danger",4,"ngIf"],["type","email","name","email","required","",3,"ngModelChange","ngModel"],["type","password","name","password","required","","minlength","6",3,"ngModelChange","ngModel"],["type","password","name","confirmPassword","required","",3,"ngModelChange","ngModel"],["expand","block","type","submit",1,"ion-margin-top",3,"disabled"],["color","danger","class","ion-text-center ion-margin-top",4,"ngIf"],[1,"ion-text-center","ion-margin-top"],["routerLink","/login"],["slot","error","color","danger"],["color","danger",1,"ion-text-center","ion-margin-top"]],template:function(n,o){if(1&n){const d=e.RV6();e.j41(0,"ion-content",5)(1,"div",6)(2,"ion-card",7)(3,"ion-card-content")(4,"form",8,0),e.bIt("ngSubmit",function(){return e.eBV(d),e.Njj(o.registrar())}),e.j41(6,"ion-item")(7,"ion-label",9),e.EFF(8,"Nombre"),e.k0s(),e.j41(9,"ion-input",10,1),e.mxI("ngModelChange",function(i){return e.eBV(d),e.DH7(o.usuario.nombre,i)||(o.usuario.nombre=i),e.Njj(i)}),e.k0s()(),e.DNE(11,h,2,0,"ion-note",11),e.j41(12,"ion-item")(13,"ion-label",9),e.EFF(14,"Email"),e.k0s(),e.j41(15,"ion-input",12,2),e.mxI("ngModelChange",function(i){return e.eBV(d),e.DH7(o.usuario.email,i)||(o.usuario.email=i),e.Njj(i)}),e.k0s()(),e.DNE(17,v,2,0,"ion-note",11),e.j41(18,"ion-item")(19,"ion-label",9),e.EFF(20,"Contrase\xf1a"),e.k0s(),e.j41(21,"ion-input",13,3),e.mxI("ngModelChange",function(i){return e.eBV(d),e.DH7(o.usuario.password,i)||(o.usuario.password=i),e.Njj(i)}),e.k0s()(),e.DNE(23,C,2,0,"ion-note",11),e.j41(24,"ion-item")(25,"ion-label",9),e.EFF(26,"Confirmar contrase\xf1a"),e.k0s(),e.j41(27,"ion-input",14,4),e.mxI("ngModelChange",function(i){return e.eBV(d),e.DH7(o.usuario.confirmPassword,i)||(o.usuario.confirmPassword=i),e.Njj(i)}),e.k0s()(),e.DNE(29,l,2,0,"ion-note",11),e.j41(30,"ion-button",15),e.EFF(31," Registrarse "),e.k0s(),e.DNE(32,c,3,1,"ion-text",16),e.k0s(),e.j41(33,"ion-text",17)(34,"p"),e.EFF(35,"\xbfYa tienes cuenta? "),e.j41(36,"a",18),e.EFF(37,"Inicia sesi\xf3n"),e.k0s()()()()()()()}if(2&n){const d=e.sdS(5),m=e.sdS(10),i=e.sdS(16),E=e.sdS(22),y=e.sdS(28);e.R7$(6),e.AVh("ion-invalid",m.invalid&&m.touched),e.R7$(3),e.R50("ngModel",o.usuario.nombre),e.R7$(2),e.Y8G("ngIf",m.invalid&&m.touched),e.R7$(),e.AVh("ion-invalid",i.invalid&&i.touched),e.R7$(3),e.R50("ngModel",o.usuario.email),e.R7$(2),e.Y8G("ngIf",i.invalid&&i.touched),e.R7$(),e.AVh("ion-invalid",E.invalid&&E.touched),e.R7$(3),e.R50("ngModel",o.usuario.password),e.R7$(2),e.Y8G("ngIf",E.invalid&&E.touched),e.R7$(),e.AVh("ion-invalid",y.invalid&&y.touched||o.passwordMismatch),e.R7$(3),e.R50("ngModel",o.usuario.confirmPassword),e.R7$(2),e.Y8G("ngIf",o.usuario.password!==o.usuario.confirmPassword&&y.touched),e.R7$(),e.Y8G("disabled",d.invalid||o.usuario.password!==o.usuario.confirmPassword),e.R7$(2),e.Y8G("ngIf",o.errorMessage)}},dependencies:[p.I,u.qT,u.BC,u.cb,u.YS,u.xh,u.vS,u.cV,s.Jm,s.b_,s.I9,s.W9,s.$w,s.uz,s.he,s.JI,s.IO,s.Gw,s.oY,R.R],encapsulation:2}),a})()}];let w=(()=>{var r;class a{}return(r=a).\u0275fac=function(n){return new(n||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[R.m.forChild(g),R.m]}),a})(),D=(()=>{var r;class a{}return(r=a).\u0275fac=function(n){return new(n||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[p.D,u.YN,s.bv,w]}),a})()}}]);