"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6688],{1339:(R,E,t)=>{t.d(E,{u:()=>F});var v=t(467),a=t(3273),i=t(6710),p=t(4412),M=t(3026),n=t(9498),L=t(9602);let F=(()=>{var h;class P{constructor(l,d,m){this.auth=l,this.router=d,this.firestore=m,this.usuarioActual=new p.t(null),this.usuario$=this.usuarioActual.asObservable(),(0,i.hg)(this.auth,u=>{this.usuarioActual.next(u)})}login(l,d){var m=this;return(0,v.A)(function*(){try{return yield(0,i.x9)(m.auth,l,d)}catch(u){throw u}})()}registrar(l,d){var m=this;return(0,v.A)(function*(){try{return yield(0,i.eJ)(m.auth,l,d)}catch(u){throw u}})()}isAdmin(){var l=this;return(0,v.A)(function*(){const d=l.auth.currentUser;if(!d)return!1;const m=(0,M.rJ)(l.firestore,"administradores"),u=(0,a.P)(m,(0,a._M)("uid","==",d.uid));return(yield(0,a.GG)(u)).size>0})()}}return(h=P).\u0275fac=function(l){return new(l||h)(n.KVO(i.Nj),n.KVO(L.t),n.KVO(M._7))},h.\u0275prov=n.jDH({token:h,factory:h.\u0275fac,providedIn:"root"}),P})()},6688:(R,E,t)=>{t.r(E),t.d(E,{LoginPageModule:()=>u});var v=t(8834),a=t(4341),i=t(7125),p=t(5528),M=t(467),n=t(9498),L=t(1339),F=t(9602);function h(o,g){1&o&&(n.j41(0,"ion-note",16),n.EFF(1," El correo es obligatorio y debe tener formato v\xe1lido. "),n.k0s())}function P(o,g){1&o&&(n.j41(0,"ion-note",16),n.EFF(1," La contrase\xf1a es obligatoria (m\xednimo 6 caracteres). "),n.k0s())}function y(o,g){if(1&o&&(n.j41(0,"ion-text",17)(1,"p"),n.EFF(2),n.k0s()()),2&o){const f=n.XpG();n.R7$(2),n.JRh(f.loginError)}}const d=[{path:"",component:(()=>{var o;class g{constructor(e,r,c){this.auth=e,this.router=r,this.loadingCtrl=c,this.email="",this.password="",this.loginError="",this.errorMessage=""}ngOnInit(){}login(){var e=this;return(0,M.A)(function*(){const r=yield e.loadingCtrl.create({message:"Iniciando sesi\xf3n..."});yield r.present();try{yield e.auth.login(e.email,e.password),(yield e.auth.isAdmin())?e.router.navigate(["/admin"]):e.router.navigate(["/parcelas"])}catch(c){e.errorMessage=c.message,e.loginError="Correo o contrase\xf1a incorrectos."}finally{r.dismiss()}})()}}return(o=g).\u0275fac=function(e){return new(e||o)(n.rXU(L.u),n.rXU(F.t),n.rXU(i.Xi))},o.\u0275cmp=n.VBU({type:o,selectors:[["app-login"]],standalone:!1,decls:29,vars:10,consts:[["loginForm","ngForm"],["emailField","ngModel"],["passwordField","ngModel"],[1,"login-container"],[1,"logo-container"],["src","assets/images/logo.jpg","alt","Logo"],[1,"login-form"],["novalidate","",3,"ngSubmit"],["position","floating"],["type","email","name","email","required","",3,"ngModelChange","ngModel"],["slot","error","color","danger",4,"ngIf"],["type","password","name","password","required","","minlength","6",3,"ngModelChange","ngModel"],["expand","block","type","submit",1,"ion-margin-top",3,"disabled"],["color","danger","class","ion-text-center",4,"ngIf"],[1,"ion-text-center","ion-margin-top"],["routerLink","/registro"],["slot","error","color","danger"],["color","danger",1,"ion-text-center"]],template:function(e,r){if(1&e){const c=n.RV6();n.j41(0,"ion-content")(1,"div",3)(2,"div",4),n.nrm(3,"img",5),n.k0s(),n.j41(4,"div",6)(5,"ion-card")(6,"ion-card-content")(7,"form",7,0),n.bIt("ngSubmit",function(){return n.eBV(c),n.Njj(r.login())}),n.j41(9,"ion-item")(10,"ion-label",8),n.EFF(11,"Email"),n.k0s(),n.j41(12,"ion-input",9,1),n.mxI("ngModelChange",function(s){return n.eBV(c),n.DH7(r.email,s)||(r.email=s),n.Njj(s)}),n.k0s()(),n.DNE(14,h,2,0,"ion-note",10),n.j41(15,"ion-item")(16,"ion-label",8),n.EFF(17,"Contrase\xf1a"),n.k0s(),n.j41(18,"ion-input",11,2),n.mxI("ngModelChange",function(s){return n.eBV(c),n.DH7(r.password,s)||(r.password=s),n.Njj(s)}),n.k0s()(),n.DNE(20,P,2,0,"ion-note",10),n.j41(21,"ion-button",12),n.EFF(22," Iniciar Sesi\xf3n "),n.k0s(),n.DNE(23,y,3,1,"ion-text",13),n.k0s(),n.j41(24,"ion-text",14)(25,"p"),n.EFF(26,"\xbfNo tienes cuenta? "),n.j41(27,"a",15),n.EFF(28,"Reg\xedstrate"),n.k0s()()()()()()()()}if(2&e){const c=n.sdS(8),_=n.sdS(13),s=n.sdS(19);n.R7$(9),n.AVh("ion-invalid",_.invalid&&_.touched),n.R7$(3),n.R50("ngModel",r.email),n.R7$(2),n.Y8G("ngIf",_.invalid&&_.touched),n.R7$(),n.AVh("ion-invalid",s.invalid&&s.touched),n.R7$(3),n.R50("ngModel",r.password),n.R7$(2),n.Y8G("ngIf",s.invalid&&s.touched),n.R7$(),n.Y8G("disabled",c.invalid),n.R7$(2),n.Y8G("ngIf",r.loginError)}},dependencies:[v.I,a.qT,a.BC,a.cb,a.YS,a.xh,a.vS,a.cV,i.Jm,i.b_,i.I9,i.W9,i.$w,i.uz,i.he,i.JI,i.IO,i.Gw,i.oY,p.R],encapsulation:2}),g})()}];let m=(()=>{var o;class g{}return(o=g).\u0275fac=function(e){return new(e||o)},o.\u0275mod=n.$C({type:o}),o.\u0275inj=n.G2t({imports:[p.m.forChild(d),p.m]}),g})(),u=(()=>{var o;class g{}return(o=g).\u0275fac=function(e){return new(e||o)},o.\u0275mod=n.$C({type:o}),o.\u0275inj=n.G2t({imports:[v.D,a.YN,i.bv,m]}),g})()}}]);